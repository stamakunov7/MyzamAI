# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Llama 3 API - –ü–æ–ª–Ω–∞—è –°–≤–æ–¥–∫–∞

## üìä –î–æ –∏ –ü–æ—Å–ª–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–û (–õ–æ–∫–∞–ª—å–Ω–æ) | –ü–û–°–õ–ï (API) |
|-----------|---------------|-------------|
| **–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏** | ‚ùå 8GB —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ + –∑–∞–≥—Ä—É–∑–∫–∞ –≤ RAM | ‚úÖ –ù–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM** | ‚ùå 8-16 GB | ‚úÖ ~500 MB |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/GPU** | ‚ùå 100% –∑–∞–≥—Ä—É–∑–∫–∞ | ‚úÖ 0% (—Ç–æ–ª—å–∫–æ API –∑–∞–ø—Ä–æ—Å—ã) |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | ‚ùå torch, transformers, accelerate | ‚úÖ –¢–æ–ª—å–∫–æ huggingface_hub |
| **–í—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** | ‚ùå 2-5 –º–∏–Ω—É—Ç | ‚úÖ 1 —Å–µ–∫—É–Ω–¥–∞ |
| **–°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞** | ‚ùå 15-30 —Å–µ–∫ | ‚úÖ 2-5 —Å–µ–∫ |
| **–õ–∞–≥–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞** | ‚ùå –î–∞, —Å–∏–ª—å–Ω—ã–µ | ‚úÖ –ù–µ—Ç |

---

## üîß –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

### **1. core/llm_manager.py**

**–î–û:**
```python
import torch
from transformers import AutoTokenizer, AutoModelForCausalLM, pipeline

tokenizer = AutoTokenizer.from_pretrained(MODEL_NAME)
model = AutoModelForCausalLM.from_pretrained(
    MODEL_NAME,
    torch_dtype="auto",
    device_map="auto",
    low_cpu_mem_usage=True
)

llama = pipeline(
    "text-generation",
    model=model,
    tokenizer=tokenizer,
    max_new_tokens=200
)
```

**–ü–û–°–õ–ï:**
```python
from huggingface_hub import InferenceClient

HF_TOKEN = os.getenv("HUGGINGFACE_API_TOKEN")
client = InferenceClient(token=HF_TOKEN)

class LlamaAPIWrapper:
    def __call__(self, prompt):
        response = self.client.chat_completion(
            messages=messages,
            model="meta-llama/Meta-Llama-3-8B-Instruct",
            max_tokens=200,
            temperature=0.2
        )
        return [{"generated_text": response.choices[0].message.content}]

llama = LlamaAPIWrapper(client, MODEL_NAME)
```

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–¥–µ–ª—å –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ API!

---

### **2. requirements.txt**

**–î–û:**
```
transformers>=4.41.0
torch>=2.0.0
accelerate
```

**–ü–û–°–õ–ï:**
```
# –£–±—Ä–∞–Ω–æ - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ!
# –¢–æ–ª—å–∫–æ –¥–ª—è API:
huggingface_hub>=0.19.0
```

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —É–º–µ–Ω—å—à–∏–ª—Å—è —Å ~5GB –¥–æ ~50MB

---

### **3. config.py**

**–î–û–ë–ê–í–õ–ï–ù–û:**
```python
HUGGINGFACE_API_TOKEN = os.getenv('HUGGINGFACE_API_TOKEN')

if not HUGGINGFACE_API_TOKEN:
    print("‚ö†Ô∏è WARNING: HUGGINGFACE_API_TOKEN not found!")
```

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ API —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

---

### **4. .env —Ñ–∞–π–ª**

**–î–û–ë–ê–í–õ–ï–ù–û:**
```env
HUGGINGFACE_API_TOKEN=hf_–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
```

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ–∫–µ–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## üéØ –ê–≥–µ–Ω—Ç—ã - –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π!

–í—Å–µ –∞–≥–µ–Ω—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å **–ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
- ‚úÖ `legal_expert.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `llama` –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚úÖ `summarizer.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `llama` –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚úÖ `reviewer_agent.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `llama` –∫–∞–∫ —Ä–∞–Ω—å—à–µ

**–ú–∞–≥–∏—è:** Wrapper –∫–ª–∞—Å—Å –¥–µ–ª–∞–µ—Ç API –≤—ã–∑–æ–≤—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º pipeline!

```python
# –ö–æ–¥ –∞–≥–µ–Ω—Ç–∞ –æ—Å—Ç–∞–ª—Å—è —Ç–∞–∫–æ–π –∂–µ:
response = self.llm(prompt)
result = response[0]["generated_text"]
```

–ê–≥–µ–Ω—Ç—ã –ù–ï –∑–Ω–∞—é—Ç —á—Ç–æ –º–æ–¥–µ–ª—å —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ API! üéâ

---

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### **–ó–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Telegram ‚Üí MyzamAI Bot
         ‚Üì
   Legal Expert Agent
         ‚Üì
    llm(prompt) ‚Üí API –≤—ã–∑–æ–≤ –∫ Hugging Face
         ‚Üì
   Meta Llama 3 (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö HF)
         ‚Üì
   –û—Ç–≤–µ—Ç ‚Üí Agent ‚Üí Formatter ‚Üí Telegram ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```

**–¢–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –¥–µ–ª–∞–µ—Ç –¢–û–õ–¨–ö–û:**
- ‚úÖ –ü—Ä–∏–µ–º Telegram —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ FAISS –ø–æ–∏—Å–∫ (–ª–µ–≥–∫–∏–π, –ª–æ–∫–∞–ª—å–Ω—ã–π)
- ‚úÖ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ HF API
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

**–¢–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –ù–ï –¥–µ–ª–∞–µ—Ç:**
- ‚ùå –ó–∞–≥—Ä—É–∑–∫–∞ 8GB –º–æ–¥–µ–ª–∏
- ‚ùå –ò–Ω—Ñ–µ—Ä–µ–Ω—Å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
- ‚ùå –¢–µ–Ω–∑–æ—Ä–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å:

### **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier Hugging Face:**
- ‚úÖ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
- ‚úÖ Llama 3 8B (–∏–ª–∏ 70B!)
- ‚úÖ $0

### **Pro tier (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ):**
- ‚úÖ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ
- ‚úÖ ~$9/–º–µ—Å—è—Ü

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞:
```bash
python bot/main.py
```

2. –ò—â–∏ –≤ –ª–æ–≥–∞—Ö:
```
‚úÖ Using Hugging Face API with model: meta-llama/Meta-Llama-3-8B-Instruct
üöÄ Model will run on HF servers (no local GPU/CPU load)
‚úÖ Llama 3 API wrapper ready!
üí° Your computer will not be loaded - all processing happens on HF servers
```

3. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
INFO:core.llm_manager:üì§ Converting prompt to chat format...
INFO:core.llm_manager:‚úì Parsed system message (345 chars)
INFO:core.llm_manager:‚úì Parsed user message (567 chars)
INFO:core.llm_manager:üì§ Calling Hugging Face API (max_tokens=200)...
INFO:core.llm_manager:‚úÖ API response received in 2.34s
```

---

## ‚úÖ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å:

| –ú–µ—Ç—Ä–∏–∫–∞ | –°—Ç–∞—Ç—É—Å |
|---------|--------|
| –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ API | ‚úÖ –ü–æ–ª–Ω–∞—è |
| –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å | ‚ùå –£–¥–∞–ª–µ–Ω–∞ |
| API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ê–≥–µ–Ω—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã | ‚úÖ –î–∞ |
| –ö–æ–º–ø –Ω–µ –ª–∞–≥–∞–µ—Ç | ‚úÖ –î–∞ |
| FAISS —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ (–ª–µ–≥–∫–∏–π) |
| Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –î–∞ |

---

## üéâ –ò—Ç–æ–≥:

**–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Llama 3 API –∑–∞–≤–µ—Ä—à–µ–Ω –Ω–∞ 100%!**

–¢–µ–ø–µ—Ä—å:
- üü¢ –ú–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö Hugging Face
- üü¢ –¢–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä —Å–≤–æ–±–æ–¥–µ–Ω
- üü¢ –ù–∏–∫–∞–∫–∏—Ö –ª–∞–≥–æ–≤
- üü¢ –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
- üü¢ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å)

**–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!** üöÄ

